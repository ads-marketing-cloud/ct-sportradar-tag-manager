___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Sportradar Tag Manager",
  "categories": ["TAG_MANAGEMENT", "PERSONALIZATION"],
  "brand": {
    "id": "sportradar_ads",
    "displayName": "Sportradar Ad:s",
    "thumbnail": "data:image/png;base64,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aSAh5oEFDKPNAZz1J1pNg2IaJYMuvJWWQXtoAQ2N8oxrGEhV1EBtGZyhhUZGcGB1awp9Qe056igtpoIIDqzUE1zq3zwP/UjjCckPrJQCqqYdCY7NbTSGkPDAAorp/TzdmnOcZkdwYOXPSFpFn1BLnt8G3E8baDoVEpCzgQWgnN648M2RQCdpJ62jCVSQo/uVjlB7hrXRXtpANTSersjhmCqiUqqm5+hz+jvLv5t1e5S566m5swL9zMq43UxraS+d7uH9LQfoVZrVw+/p5h40JwpfOa2n76ktx69YfUoLqB91VEnNWVZCPTWYqmk97YnxuecMNdE6Gt3Vz3yWVVI2bqBnqCnH4/I8NdFyGkAdlSTwc/UxNWfZ/KgPGEbj6C66lxbSCqqPsUephmbRZCqOZWRkP7A6uo7uoBp6OIazrqBamkXlNJQSkRpZzdQeQ610hJrpa2qkHdSQZh9RI+2jZjpEf8R0bcdDfpuzF+lHY2gG1dFyqr9Ey6iOZtKtVBQpG0VUQtOpLobfOXU0m0rp8qh3GUylVEnzaCE91s15l1AtzaRRVBiFrz+Noqk0n5ZQfQ96iO6h8TQwkjoTyMD6X0m9QvRSIH+dPRc10LBIkiRFDqyEMUIm01eBjKI4OkjVkSRJAuDAyhNGyZ20lc4FMpQyrZEeoH6RJEkCUhxYecZAuZoWUQP9Hsh46qxW2kWP08hIkiRdkgMrIKnPHyyhWnqWttB++pnOJjCiztMJ+o4+oBdpMZVRb7hpVZKkPsOBFd8AG0zFdBOVpZpAFRk2icpSldJwGkIFkSRJ6hUcWJIkSQ4sSZKksDmwJEmSHFiSJElhc2BJkiQ5sCRJksLmwJIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIk6V/24EAAAAAAAMj/tRFUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVXag0MCAAAAAEH/XzvDAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAkGuIXUKmRIQAAAAAElFTkSuQmCC"
  },
  "description": "Sportradar Tag Manager",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "containerId",
    "displayName": "Container Id",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setInWindow = require('setInWindow');
const copyFromWindow = require('copyFromWindow');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');

setInWindow("srtmCommandsOptions", {
  containerId: data.containerId,
} , false);

if (!copyFromWindow("srtmCommands")) {
  setInWindow("srtmCommands", [] , false);
}
const containerId = data.containerId;
const url = "https://tm.ads.sportradar.com/dist/tag-manager.js?id=" + containerId;
if (queryPermission('inject_script', url)) {
  injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);
  data.gtmOnSuccess();
} else {
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "srtmCommands"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "srtmCommandsOptions"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tm.ads.sportradar.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Script was injected
  code: |
    // Call runCode to run the template's code with a lowercase string
    runCode({containerId: 'STM-AAAAIN', name: 'srtmCommands'});
    // Validate that the result of runCode is an uppercase string.
    assertApi('injectScript').wasCalled();
setup: ''


___NOTES___

Created on 3/3/2023, 12:35:33 PM


